<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Student Finance Manager — Login</title>
  <style>
    :root{--bg:#f3f6fb;--card:#ffffff;--brand:#2563eb;--muted:#6b7280;--success:#10b981}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,Arial;background:var(--bg);color:#0f172a}
    .container{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px}
    .card{width:100%;max-width:980px;background:linear-gradient(180deg, rgba(255,255,255,0.9), var(--card));box-shadow:0 8px 30px rgba(2,6,23,0.08);border-radius:12px;overflow:hidden;display:grid;grid-template-columns:1fr 1fr}
    .panel-left{padding:36px 32px;border-right:1px solid rgba(15,23,42,0.04);background:linear-gradient(180deg, #fff, #fbfdff)}
    .brand{display:flex;align-items:center;gap:12px}
    .logo-mark{width:46px;height:46px;border-radius:8px;background:linear-gradient(90deg,#2563eb,#10b981);display:flex;align-items:center;justify-content:center;color:white;font-weight:700}
    h2{margin:12px 0 6px;font-size:20px}
    p.lead{margin:0;color:var(--muted)}
    form{margin-top:18px;display:flex;flex-direction:column;gap:12px}
    label{font-size:13px;color:#334155}
    input[type=text],input[type=password],input[type=email]{padding:10px 12px;border-radius:8px;border:1px solid #e6edf6;font-size:15px}
    .row{display:flex;gap:10px}
    .actions{display:flex;align-items:center;justify-content:space-between;margin-top:8px}
    button{background:var(--brand);color:white;padding:10px 14px;border-radius:8px;border:none;cursor:pointer;font-weight:600}
    .btn-ghost{background:transparent;color:var(--brand);border:1px solid rgba(37,99,235,0.12)}
    .muted{color:var(--muted);font-size:13px}
    .right{padding:24px;background:linear-gradient(180deg, #f8fbff, #ffffff);display:flex;flex-direction:column;align-items:center;justify-content:center}
    .illustration{width:220px;height:160px;background:linear-gradient(180deg,#ecfeff,#eef2ff);border-radius:10px;display:flex;align-items:center;justify-content:center;color:#0f172a;font-weight:700}
    .helper{margin-top:14px;color:var(--muted);text-align:center}
    .error{color:#ef4444;font-weight:600}
    .success{color:var(--success);font-weight:600}
    .password-toggle{cursor:pointer;font-size:13px;color:var(--brand);background:transparent;border:none}
    .small{font-size:13px}
    @media (max-width:880px){.card{grid-template-columns:1fr}.panel-left{border-right:none}.right{order:-1;padding:18px}}
  </style>
</head>
<body>
  <div class="container">
    <div class="card" role="main">
      <div class="panel-left">
        <div class="brand">
          <div class="logo-mark">SF</div>
          <div>
            <div style="font-weight:700">Student Finance Manager</div>
            <div class="muted small">Secure login to manage expenses & wellness</div>
          </div>
        </div>

        <h2>Welcome back</h2>
        <p class="lead">Sign in to access your dashboard and track spending, budgets, and wellness.</p>

        <form id="loginForm" onsubmit="return onSubmit(event)">
          <div>
            <label for="email">Email</label>
            <input id="email" name="email" type="email" autocomplete="email" required placeholder="you@college.edu" />
          </div>

          <div>
            <label for="password">Password <button type="button" class="password-toggle" id="togglePwd">Show</button></label>
            <input id="password" name="password" type="password" autocomplete="current-password" required placeholder="Your password" />
          </div>

          <div class="row" style="align-items:center;justify-content:space-between">
            <label style="display:flex;align-items:center;gap:8px"><input id="remember" type="checkbox"/> <span class="small muted">Remember me</span></label>
            <a href="#" id="forgotLink" class="small">Forgot password?</a>
          </div>

          <div class="actions">
            <button type="submit">Sign in</button>
            <button type="button" class="btn-ghost" onclick="onRegister()">Create account</button>
          </div>

          <div id="feedback" aria-live="polite"></div>
        </form>

        <div style="margin-top:18px;display:flex;gap:10px;align-items:center">
          <div style="flex:1;height:1px;background:linear-gradient(90deg,#e6eefc,transparent)"></div>
          <div class="muted small">or</div>
          <div style="flex:1;height:1px;background:linear-gradient(90deg,transparent,#e6eefc)"></div>
        </div>

        <div style="margin-top:12px;display:flex;gap:10px">
          <button class="btn-ghost" onclick="socialLogin('google')">Sign in with Google</button>
          <button class="btn-ghost" onclick="socialLogin('github')">Sign in with GitHub</button>
        </div>

        <p class="helper">By signing in you agree to our terms of service and privacy policy.</p>
      </div>

      <div class="right">
        <div class="illustration">Finance + Wellness</div>
        <p class="helper">New here? Create an account to start tracking your expenses and wellness logs. Link finances to wellbeing insights.</p>
      </div>
    </div>
  </div>

<script>
// Password toggle
const pwdInput = document.getElementById('password');
const toggleBtn = document.getElementById('togglePwd');
toggleBtn.addEventListener('click', ()=>{
  if(pwdInput.type === 'password'){ pwdInput.type='text'; toggleBtn.textContent='Hide'; }
  else { pwdInput.type='password'; toggleBtn.textContent='Show'; }
});

async function onSubmit(e){
  e.preventDefault();
  const feedback = document.getElementById('feedback');
  feedback.textContent='';
  feedback.className='';

  const email = document.getElementById('email').value.trim();
  const password = document.getElementById('password').value;
  const remember = document.getElementById('remember').checked;

  if(!email || !password){
    feedback.textContent = 'Please enter email and password';
    feedback.className = 'error';
    return false;
  }

  // show loading
  const submitBtn = e.submitter || e.target.querySelector('button[type=submit]');
  submitBtn.disabled = true; submitBtn.textContent = 'Signing in...';

  try{
    // Call your backend login endpoint. Expected: POST /api/auth/login {email,password}
    const resp = await fetch('/api/auth/login', {
      method: 'POST',
      headers: {'Content-Type':'application/json'},
      body: JSON.stringify({email, password, remember})
    });

    const data = await resp.json();
    if(resp.ok){
      feedback.textContent = 'Login successful — redirecting...';
      feedback.className = 'success';
      // Save token or session as needed
      if(data.token){ localStorage.setItem('sfm_token', data.token); }
      // Redirect to dashboard (adjust path)
      setTimeout(()=> window.location.href = data.redirect || '/dashboard', 700);
    } else {
      feedback.textContent = data.error || data.message || 'Login failed';
      feedback.className = 'error';
    }
  }catch(err){
    console.error(err);
    feedback.textContent = 'Network error — could not contact server';
    feedback.className = 'error';
  } finally{
    submitBtn.disabled = false; submitBtn.textContent = 'Sign in';
  }
  return false;
}

function onRegister(){
  // Replace with your register route
  window.location.href = '/register';
}

function socialLogin(provider){
  // Redirect to OAuth endpoint e.g. /auth/google
  window.location.href = '/auth/' + provider;
}
</script>
</body>
</html>